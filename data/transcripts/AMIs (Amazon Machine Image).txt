 Hey, this is Andrew Brown. And we are taking a look at Amazon machine image, also known as ami. And that is how we are going to say it throughout the rest of this course, because that's what everybody calls it. So am I provides the information required to launch your instance. And you can turn those easy to instances into ami. So you can create copies of your servers. So here I have a nice little diagram. Let's talk about what is being held within this ami. So we have a template for the root volume of the instance, this could be EBS snapshot, or the instance store template, we're going to have things like operating system application server or applications itself. In the diagram here, you can see it here on the left hand side, we're calling out that EBS volume, but understand that that stuff might be contained within that volume, launch permissions that control which AWS accounts can use the ami to launch instances, a block device mapping that specifies the volumes to attach the instance when it's launched. And the most important thing I want you to know is that am eyes are region specific, this is super important to remember, because if you if you copy an ami ID from a different region and try to launch it as an instance, it's just not going to work. Let's talk about some use cases. So am eyes help you keep incremental changes to your OS application code and system packages, obviously makes launching easy to instances, virtual machines of the same kind of template, very easy. Here I have an example where I have a bunch of ami's and they're just named increment incrementally. So they're counting up, you can use systems manager automation. So you can routinely patch ami's with security updates and bake those ami's baking is a process when you automate the creation of ami's when you are in just just images, images of virtual machines, when you are making changes, ami's are used within launch configurations and launch templates to manage ami revisions, launch configurations is the old way and launch templates is the new way. I tend to use both when they're available, but they're very similar, but they have a slight difference there. Something that's really tightly a couple of ami's is the AWS marketplace, because most of the things in the AWS marketplace, especially for EC two are ami images. And so you could go there and you could get a subscription to something like Nvidia GPU optimized ami directly from Nvidia, you could go there and get a security hardened ami from the center of internet security. So a lot of cool ami's that you can leverage right away, some are free, some are paid, then you need to choose your ami. So it's important to know a couple things when about your ami's. And the first thing I want to show you is the ami is different per region. I already mentioned this, but look at this one here. So this is the same Amazon Linux 2023. Am I just in two different regions. So in the top we have for you is just one for the bottom we have CA central one, I'm gonna bring up my pen tool because I want to make this very clear. Look at the end numbers to nine d, e five c, they're not the same. Some ami's will have multiple architecture options with alternate ami IDs. So if you wanted to use arm instead of x 86, you could do so but notice that it has a completely different ami ID, you can search based on a bunch of parameters for your ami's there's region of course, be able to switch to the region you need the OS the architecture, the launch permissions, the state of or like what kind of root device volume that you're utilizing. And you can see those options there I say root device volume say root device type means the same thing here. But we have some options here to quickly filter and find what we're looking for. Let's talk about boot modes. Ami has two different boot modes. The first is the legacy BIOS basic input output system. This is the traditional firmware interface for computers, which has been used for decades and initiates hardware during the boot process and providing a runtime service for OS and programs. If you've ever had a Windows machine, and you had to press like f2 to get into some boot screen to make some changes. That's what we're talking about right here. Not that I've ever had access to this on AWS, but we're just talking about what kind of boot boot systems there are on these EC two instances. And if you have the legacy BIOS, this would not have support for secure boot, which you really want to curate, that's when you have a secure hardware chip to make sure there's no tampering with with the the machine that it may require. In some cases, the reason you might want to use legacy BIOS is that you might be using a legacy operating system or legacy software. For the most part, you're going to be wanting to use the unified extension, extensible extension, extensible firmware interface, u e, fi, not used to saying the full initialism, usually just UEFI, this is a modern firmware interface for computers designed to replace the older BIOS firmware firmware interface that supports secure boot, faster startup times supports drives larger than two terabytes, pre boot environments with graphical UI with some capabilities, capabilities. The only reason you use legacy BIOS is for legacy reasons. But for the most part, you want to utilize UEI, UEFI. And when you are launching your ami, as you can see which boot system that is using, there is a third option, which I don't display here, which says UEFI preferred. So when it can, it will use UEFI. But generally, most are going to be UEFI, you'd be hard pressed to find the BIOS one when you're launching your ami's, you'd have to search for it, to be honest to find it. There's a thing called elastic network adapter. This is part of the enhanced networking, which there's a lot to talk about there. But I just want to talk about this particular enhanced networking thing. So the elastic network adapter supports network speeds of up to 100 gigabytes per second or gigabits per second for supported instance types. And you can see that some are enabled there. So the Amazon x 2023. Am I is an enabled most of them seem to be in a ENN enabled these days, all instances based on the nitro system use ENA for enhanced networking. So the nitro system has a bunch of things. One of it is the nitro hypervisor and nitro cards. But there are specific instance types that you can launch like t three micro that utilizes the nitro system. And so those ones are going to be able to take full advantage of ENA support. So just because you have ENA turned on, it really still depends on what instance type you choose underneath, you have the root device type or the volume, and we have one that is backed by EBS, or one that is backed by instance store. The key difference here is that one that is backed by EBS, it will actually have independent storage from the actual instance. And if it's independent from it, and you terminate or stop this instance, the storage can remain and so you will be able to persist your storage beyond your instance, you can even attach it to a new instance or whatever you want to do with it, make copies of it. And so most of these are EBS backed, there are cases where there are instance stored back and this is where you are sharing the the storage, whatever the actual hardware storage with the actual instances underneath. And the thing is, is that if you stop or terminate your instance, you're gonna lose that data. So pretty straightforward. There are some things we should know how to do with ami. So the first is creating ami, you can do this on either a running or stopped instance, you can even reboot it before you do it so that it's just in better shape. So a lot of options here, you can copy an ami. And often you have to copy ami is because it's the only way you can get them to another region. And that can be exam question, by the way. So, you know, that is something to consider. Also, if you have a ami, that is not encrypted, the way that you encrypt it is make a copy of it and then put in that encrypted option. Okay, so that is another thing to know. So besides just copying image, there's restore and restore, which seems very similar to copy, but has a different use case. So this is where you're storing the ami in the s3 bucket, and you can restore it from an s3 bucket. This is when you want to copy ami from one AWS partition to another. So we have the store command, and then the restore command. I've never had to do this. But the reason why you would do this over copy is that it you could have potential savings with cheaper long term storage, lifecycle management, disaster recovery, auditing compliance. But to be honest, like, AWS manages the ami. So the chance of you losing those things is very unlikely. But if you just need to have that for compliance reasons, you can put it into an s3 bucket wherever you want somewhere else. Then there's a couple other things we can do, we can deprecate ami. The idea here is that if you deprecate it, or sorry, de register first, I'm reading at the top here. But if we are de registering it, basically, you are saying you're done with this. Am I it's kind of like when you release an elastic IP, it's basically the way of deleting the ami. I mean, just don't call it delete, because you're not actually deleting it, you're de registering it. And so the idea is that when you try to launch for future instances, they will not launch. However, if you de register, which is essentially the delete frame is it doesn't delete snapshots. So if you need to do that and get rid of those snapshots, you have to delete those manually, you can deprecate am eyes, this is when you have an ami and you want people to stop using it after a particular date. Very important if you are, let's say, sharing that ami externally or selling in the marketplace, you can disable am eyes. So this just prevents people from launching ami, you could obviously re enable them, but it's kind of like a soft delete. If you will, that you can always undo later on, you can share am eyes. And there are three different settings for sharing public explicit implicit, implicit is the default, that's basically you have the ami explicit is when you want to share with a very specific it was account organization or OU organizational unit. And public is basically anyone can share it, that's where you're putting it into the community. There are some options you have to configure, before you can do that. But those are the three. And that's where we're basically changing the launch permission. So when you say launch permissions, group all, you're basically saying, this is public. Now, this would be a bit different for the ones where you specify specific it was account or otherwise, am eyes can be sold in this marketplace. So that is something that is cool. I'm not covering that in this course. But, you know, it's something you could do as a business model. virtualization types matter, because when you have ami, it's going to either be HMB, or HVM, sorry, or PV. So hardware virtual instance, or pair virtualization. It's all the name what it does. So for HVM, this is a full virtualization with hardware assistance, pair virtualization, software assisted virtualization requiring OS modification. The hardware assisted part here is that HVM does utilize hardware assisted technology. So it's utilizing the actual hardware, whereas pair virtualization is simulating the hardware. For performance, you're going to get better performance with HVM. And with PV, not so much there used to be a case where PV could be better, but now HVM is always more performance, you have more support for for OS is because you can utilize the hardware whereas pair virtual virtualization you were limited. The boot method here is it can be a can boot from an EBS volume or instance store. And pair virtualization can only boot from an instance store. For usage, it's recommended for modern OS applications requiring specific hardware features. And pair virtualization is historically used for certain workloads, and older instance types less commonly used for new deployments, you're basically never going to see virtualization types because basically never ever, ever, ever need to choose PV because AWS has basically moved everything over to H, HVM. But in the case of you do see it, I want you to know about it. And that's all I need you to know about am eyes. There you go. Transcribed by https://otter.ai